use "std/mem.cst";
use "std/linux.cst";
use "std/string.cst";

fn main() as i32 {
    gheapinit(1024 * 1024); // 1MB heap

    // Test 1: String Creation
    let is String as s1 = String("Hello, ");
    let is String as s2 = String("World!");

    // Test 2: Concatenation
    let is String as msg = string_concat(s1, s2);
    
    write(STDOUT, "Concat: ", 8);
    write(STDOUT, msg.ptr, cast(i64, msg.len));
    write(STDOUT, "\n", 1);

    // Test 3: Int to String
    let is String as s_num = int_to_string(12345);
    
    write(STDOUT, "Int: ", 5);
    write(STDOUT, s_num.ptr, cast(i64, s_num.len));
    write(STDOUT, "\n", 1);

    let is String as s_neg = int_to_string(0 - 987);
    write(STDOUT, "Neg: ", 5);
    write(STDOUT, s_neg.ptr, cast(i64, s_neg.len));
    write(STDOUT, "\n", 1);

    // Cleanup
    string_free(s1);
    string_free(s2);
    string_free(msg);
    string_free(s_num);
    string_free(s_neg);

    return 0;
}